<!DOCTYPE html>
<html lang="en">

	<head>
        
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">

		<!--CUSTOM CSS-->
		<link rel="stylesheet" href="./assets/css/style.css">
		<link rel="stylesheet" href="./assets/css/fonts.css">
		<!-- <link rel="stylesheet" href="./assets/css/responsive.css"> -->

		<!--ICON-->
		<link rel="shortcut icon" type="image/x-icon" href="./GeoterRA.ico">

		<title id="tittle-page">Página Protegida</title>

	</head>

  	<body>

		<div class="general-container">

			<!-- NAVBAR -->
			<nav class="navbar Montserrat-Regular">
				
				<div class="logo-container">
					<a href="./index.html"> <img id="logo" src="./assets/images/GeoterRA-Logo.svg" class="header-logo" alt="Webpage logotype"> </a>
				</div>
				
				<div class="menu">
					
					<a href="#">About Us</a>
					<a href="#">Contact</a>
					<a href="./map.html">Map</a>
					<a href="./login.html">Login</a>
					
				</div>

				<script>
					document.addEventListener("DOMContentLoaded", function() {
						let xhr = new XMLHttpRequest();
						xhr.open("GET", "assets/includes/verify_session.php", true);
						xhr.onreadystatechange = function () {
							if (xhr.readyState == 4 && xhr.status == 200) {
								let response = JSON.parse(xhr.responseText);
								if (response.status === 'not_loggedin') {
									window.location.href = "login.html"; // Redirige al usuario si no está logueado
								}
							}
						};
						xhr.send();
					});
				</script>
				
			</nav>
			<!-- NAVBAR -->

			<!-- BODY -->
			<div class="loged-in-container">

				<!--------------------------------LOADER----------------------------------->
				<div class="web-loader" id="loader">
					<img src="./assets/images/GeoterRA-Logo.svg" class="logoWelcome" id="logoWelcome">
					<div id="carga_pagina">

					</div>
				</div>
				<!--------------------------------END LOADER------------------------------->

				<h1 class="center-text">INGRESO EXITOSO!</h1>
				<style>
					h1{
						padding-top: 25%;
					}
				</style>

				<button id="logout-btn">Cerrar Sesión</button>

				<script>
					document.getElementById("logout-btn").addEventListener("click", function() {
						// Realiza una solicitud al servidor para cerrar la sesión
						let xhr = new XMLHttpRequest();
						xhr.open("GET", "assets/includes/logout.php", true);
						xhr.onreadystatechange = function () {
							if (xhr.readyState == 4 && xhr.status == 200) {
								// Redirige al usuario a la página de inicio de sesión después de cerrar sesión
								window.location.href = "login.html";
							}
						};
						xhr.send();
					});
				</script>

			</div>

			<!-- JS INCLUDES -->
			<script src="./assets/js/web-loader.js"></script>
		</div>
	</body>
</html>
